(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"1AYW":function(t,e,o){"use strict";o.d(e,"a",(function(){return a}));var i=o("8Y7J"),n=o("SVse"),c=o("cDif");function s(t,e){if(1&t){const t=i.Ub();i.Tb(0,"msd-icon",4),i.ac("click",(function(){return i.yc(t),i.ec().redirect()})),i.Sb()}if(2&t){const t=i.ec();i.nc("name",t.msdIcon)}}let a=(()=>{class t{constructor(t){this._location=t,this.backButton=!1}redirect(){this.callBack?this.callBack():this._location.back()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(i.Nb(n.j))},t.\u0275cmp=i.Hb({type:t,selectors:[["app-header-app"]],inputs:{msdIcon:"msdIcon",title:"title",backButton:"backButton",callBack:"callBack"},decls:6,vars:3,consts:[["role","navigation","tabindex","0",1,"msd-header-app"],["aria-hidden","true",3,"name","click",4,"ngIf"],[1,"msd-header-app__title"],[1,"msd-header-app__space"],["aria-hidden","true",3,"name","click"]],template:function(t,e){1&t&&(i.Tb(0,"div",0),i.Tb(1,"div"),i.Ec(2,s,1,1,"msd-icon",1),i.Sb(),i.Tb(3,"div",2),i.Gc(4),i.Sb(),i.Sb(),i.Ob(5,"div",3)),2&t&&(i.Bb("aria-label","atras"),i.Ab(2),i.mc("ngIf",e.msdIcon),i.Ab(2),i.Hc(e.title))},directives:[n.o,c.n],styles:["[hidden][_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.header-transparent[_nghost-%COMP%]   .msd-header-app[_ngcontent-%COMP%]{background:transparent;color:#2c3038}.header-transparent[_nghost-%COMP%]   .msd-header-app__title[_ngcontent-%COMP%]{color:#2c3038}.header-transparent[_nghost-%COMP%]   .msd-header-app[_ngcontent-%COMP%]     svg{fill:#2c3038!important}.header-gris[_nghost-%COMP%]   .msd-header-app[_ngcontent-%COMP%]{background:#f6f7f8;color:#2c3038}.header-gris[_nghost-%COMP%]   .msd-header-app__title[_ngcontent-%COMP%]{color:#2c3038}.header-gris[_nghost-%COMP%]   .msd-header-app[_ngcontent-%COMP%]     svg{fill:#2c3038!important}.msd-header-app[_ngcontent-%COMP%]{background-image:linear-gradient(90deg,#ff9100,#f40);height:48px;position:fixed;left:0;right:0;top:0;z-index:1000;padding:0 16px;display:flex;align-items:center}.msd-header-app[_ngcontent-%COMP%]   msd-icon[_ngcontent-%COMP%]{margin-right:8px}.msd-header-app[_ngcontent-%COMP%]     svg{fill:#fff}.msd-header-app__title[_ngcontent-%COMP%]{color:#fff;font-weight:800;padding-top:2px;font-size:16px}.msd-header-app__space[_ngcontent-%COMP%]{height:48px;width:100%}"]}),t})()},lFb0:function(t,e,o){"use strict";o.d(e,"a",(function(){return s}));var i=o("SVse"),n=o("cDif"),c=o("8Y7J");let s=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[i.c,n.o]]}),t})()},"t/jR":function(t,e,o){"use strict";o.r(e),o.d(e,"MenuProductosModule",(function(){return Q}));var i=o("SVse"),n=o("6VmC"),c=o("iInd"),s=o("87Zq"),a=o("IzEk"),r=o("RLuz"),d=o("PxUT"),l=o("RT7Y"),p=o("YMQ/"),u=o("HILO"),m=o("uIF3"),h=o("7ad5"),b=o("yKF9"),f=o("KY/7"),g=o("7Cbv"),v=o("8Y7J"),_=o("IheW");let O=(()=>{class t{constructor(t){this.http=t}pagaAquiService(t){const e={"Content-Type":"application/json",nombreaplicacion:"HOME20",Authorization:t.token,canal:"43",codigosesion:t.codigosesion,xtrackid:t.uuid?t.uuid:Object(g.a)(),funcionalidad:"Home",etapa:"despliegue menu","cache-control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",rutcliente:t.rut,dvcliente:t.dv};return this.http.get("/servicios/homebff/bff/ocvt/v2/pagaAqui",{headers:e})}}return t.\u0275fac=function(e){return new(e||t)(v.Xb(_.a))},t.\u0275prov=v.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var M=o("r6E6"),P=o("1uK8"),I=o("6Xh2"),S=o("f2E6"),y=o("bsJT"),A=o("tqRt"),C=o("1AYW"),k=o("n+Oc"),T=o("cDif");function E(t,e){if(1&t&&v.Ob(0,"msd-icon",5),2&t){const t=v.ec();v.nc("name",t.msdIcon),v.nc("size",t.size)}}function N(t,e){if(1&t&&v.Ob(0,"msd-icon",6),2&t){const t=v.ec();v.nc("name",t.msdIconRight)}}let $=(()=>{class t{constructor(){this.last=!1,this.msdIconRight="bech_chevron_right"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=v.Hb({type:t,selectors:[["app-list-item-producto"]],inputs:{msdIcon:"msdIcon",color:"color",size:"size",producto:"producto",dato:"dato",last:"last",msdIconRight:"msdIconRight"},decls:8,vars:4,consts:[[1,"list-item-producto"],["class","list-item-producto__icon-left","color","#ff9100",3,"name","size",4,"ngIf"],[1,"list-item-producto__producto"],[1,"list-item-producto__dato"],["class","list-item-producto__icon-right",3,"name",4,"ngIf"],["color","#ff9100",1,"list-item-producto__icon-left",3,"name","size"],[1,"list-item-producto__icon-right",3,"name"]],template:function(t,e){1&t&&(v.Tb(0,"div",0),v.Ec(1,E,1,2,"msd-icon",1),v.Tb(2,"div"),v.Tb(3,"div",2),v.Gc(4),v.Sb(),v.Tb(5,"div",3),v.Gc(6),v.Sb(),v.Sb(),v.Ec(7,N,1,1,"msd-icon",4),v.Sb()),2&t&&(v.Ab(1),v.mc("ngIf",e.msdIcon),v.Ab(3),v.Hc(e.producto),v.Ab(2),v.Hc(e.dato),v.Ab(1),v.mc("ngIf",e.msdIconRight))},directives:[i.o,T.n],styles:['[hidden][_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}.list-item-producto[_ngcontent-%COMP%]{padding:12px 16px;display:flex;align-items:center;position:relative;justify-content:space-between;background:#fff}.list-item-producto__producto[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.list-item-producto__dato[_ngcontent-%COMP%]{font-size:14px}.list-item-producto.last[_ngcontent-%COMP%]:after{opacity:0}.list-item-producto__icon-right[_ngcontent-%COMP%]{margin-left:auto}.list-item-producto__icon-right[_ngcontent-%COMP%]     svg{fill:#868c99}.list-item-producto__icon-left[_ngcontent-%COMP%]{margin-right:12px}.list-item-producto[_ngcontent-%COMP%]:after{position:absolute;content:"";left:52px;right:0;height:1px;bottom:0;background:#e9ecf0}']}),t})();var U=o("HFj2");function R(t,e){if(1&t){const t=v.Ub();v.Tb(0,"app-list-item-producto",7),v.ac("click",(function(){v.yc(t);const o=e.$implicit;return v.ec().selectProducto(o)})),v.Sb()}if(2&t){const t=e.$implicit;v.nc("producto",t.nombre),v.nc("dato",t.nroCuenta),v.mc("msdIcon","card")("color","#ff9100")}}function w(t,e){if(1&t){const t=v.Ub();v.Tb(0,"app-list-item-producto",8),v.ac("click",(function(){v.yc(t);const o=e.$implicit;return v.ec().buscarMovimientos(o)})),v.Sb()}if(2&t){const t=e.$implicit,o=v.ec();v.nc("producto",t.nombre),v.oc("dato","N\xb0 ",t.nrotarjeta,""),v.mc("msdIcon",o.setLogo(t.marca))}}function j(t,e){if(1&t){const t=v.Ub();v.Tb(0,"app-list-item-producto",7),v.ac("click",(function(){v.yc(t);const o=e.$implicit;return v.ec().selectCuentaAhorro(o)})),v.Sb()}if(2&t){const t=e.$implicit;v.nc("producto",t.nombre),v.nc("dato",t.nroCuenta),v.mc("msdIcon","pig_money")("color","#ff9100")}}function x(t,e){if(1&t){const t=v.Ub();v.Tb(0,"app-list-item-producto",7),v.ac("click",(function(){v.yc(t);const e=v.ec();return e.seleccionaMenu(e.pagaAquiMP)})),v.Sb()}if(2&t){const t=v.ec();v.nc("producto",t.pagaAquiMP.name),v.nc("dato",t.pagaAquiMP.subtitle),v.mc("msdIcon","cell_phone")("color","#ff9100")}}function B(t,e){if(1&t){const t=v.Ub();v.Tb(0,"app-list-item",11),v.ac("click",(function(){v.yc(t);const e=v.ec(2);return e.seleccionaMenu(e.mi10)})),v.Sb()}if(2&t){const t=v.ec(2);v.nc("title",t.mi10.name),v.mc("msdIcon","cell_phone")}}function q(t,e){if(1&t){const t=v.Ub();v.Tb(0,"div",12),v.ac("click",(function(){v.yc(t);const o=e.$implicit;return v.ec(2).seleccionaMenu(o)})),v.Ob(1,"app-list-item",13),v.Sb()}if(2&t){const t=e.$implicit;v.Ab(1),v.mc("msdIcon",t.icon)("color","#ff9100")("title",t.name)("nuevo",!!t.new)}}function F(t,e){if(1&t&&(v.Tb(0,"div"),v.Tb(1,"div",1),v.Gc(2),v.Sb(),v.Ec(3,B,1,2,"app-list-item",9),v.Ec(4,q,2,4,"div",10),v.Sb()),2&t){const t=e.$implicit,o=v.ec();v.Ab(2),v.Hc(t.label),v.Ab(1),v.mc("ngIf",o.activeMi10&&!o.tieneMi10),v.Ab(1),v.mc("ngForOf",o.MENU_CATEGORIA[t.label])}}function z(t,e){if(1&t){const t=v.Ub();v.Tb(0,"app-list-item",14),v.ac("click",(function(){v.yc(t);const e=v.ec();return e.openBrowser(e.menuPortabilidad)})),v.Sb()}if(2&t){const t=v.ec();v.nc("title",t.menuPortabilidad.name),v.mc("msdIcon","file_text")("color","#ff9100")}}function D(t,e){if(1&t){const t=v.Ub();v.Tb(0,"app-list-item",14),v.ac("click",(function(){v.yc(t);const e=v.ec();return e.seleccionaMenu(e.pagaAquiPS)})),v.Sb()}if(2&t){const t=v.ec();v.nc("title",t.pagaAquiPS.name),v.mc("msdIcon","cell_phone")("color","#ff9100")}}const L=[{path:"",component:(()=>{class t{constructor(t,e,o,i,n,c,s,a,r,d,l,p,u,m,h,b){this.productosStore$=t,this.ahorroStore$=e,this.tarjetasStore$=o,this.menuStore$=i,this.clienteStore$=n,this.menuRouter=c,this.pagaAquiService=s,this.movimientosStore$=a,this.router=r,this.movimientosTcrStore$=d,this.deviceBridgeService=l,this.modalService=p,this.ngZone=u,this.currentGestionCardStore$=m,this.modalStore$=h,this.savingAccountHandler=b,this.tieneAhorro=!1,this.tieneMi10=!1,this.isPortabilidad=!1,this.menuPortabilidad={},this.mi10={},this.activeMi10=!1,this.menuInversiones={},this.isInversiones=0}ngOnInit(){this.productos$=this.productosStore$.select(r.a.seleccionarTodosLosProductos),this.ahorros$=this.ahorroStore$.select(d.c.seleccionarTodaLasCuentasAhorro),this.tarjetas$=this.tarjetasStore$.select(h.c.seleccionarTodasLasTC),this.menus$=this.menuStore$.select(p.b.selectMenuState),this.validateAccounts(),this.loadMenus()}validateAccounts(){this.ahorros$.pipe(Object(a.a)(1)).subscribe(t=>{t.forEach(t=>{"0318"===t.codigoNumericoProducto?this.tieneAhorro=!0:"0107"===t.codigoNumericoProducto&&(this.tieneMi10=!0)})})}loadMenus(){this.menus$.pipe(Object(a.a)(1)).subscribe(t=>{const e=t.menu?t.menu:{};if(e.menus&&e.categorias){const t=e.menus;if(this.CATEGORIAS_PRODUCTOS=e.categorias.MENU_PRODUCTOS_NUEVA_HOME,this.MENU_PRODUCTOS=t.MENU_PRODUCTOS_NUEVA_HOME,null==this.MENU_PRODUCTOS)return this.CATEGORIAS_PRODUCTOS=null;let o=[];for(let e of this.CATEGORIAS_PRODUCTOS)o[e.label]=[...this.MENU_PRODUCTOS.filter(t=>t.id_category===e.id_category&&this.pilotoBepass(t)).filter(t=>this.loadOptions(t))||[]];this.MENU_CATEGORIA=o}this.loadPortabilidad(e.menus),this.loadPagaAqui(e.menus),this.loadMi10(e.menus),this.loadInversiones(e.menus)})}loadOptions(t){return"productos_ahorro"!==t.id||!this.tieneAhorro}seleccionaMenu(t){this.type=t.type,this.action=t.action,!0===t.bepass?this.deviceBridgeService.estadoClaveBePass().pipe(Object(a.a)(1)).subscribe(e=>{this.ngZone.run(()=>{"000"===e.data.vtResponseCode?this.menuRouter.seleccionaMenu(t.type,t.action):this.modalService.open(M.a,{data:{titulo:"Crea tu clave BE Pass",subtitulo:"Por seguridad para autorizar esta <br>operaci\xf3n, deber\xe1s crear tu clave<br> BE Pass",primaryButton:"Crear clave BE Pass",secondaryButton:"Cancelar",icon:"ic_bepass",item:{type:"LINK",action:"/apps/home/bepass/onboarding"}}})})}):this.menuRouter.seleccionaMenu(t.type,t.action)}loadPagaAqui(t){const e=t&&t.MENU_PAGAAQUI?t.MENU_PAGAAQUI:null;e&&(e.filter((function(t){return!0===t.enabled&&!0===t.bepass})).forEach(t=>{"producto_pagaqui"===t.id?(this.pagaAquiPS=t,this.showPaPs=!0):"pagaqui"===t.id&&(this.pagaAquiMP=t,this.showPaMp=!0)}),this.clienteStore$.select(l.c.selectClienteState).pipe(Object(a.a)(1)).subscribe(t=>{this.pagaAquiService.pagaAquiService(t).pipe(Object(a.a)(1)).subscribe(t=>{t.code&&("00"===t.payload.data.estado&&this.showPaMp?this.isPaMp=!0:"01"===t.payload.data.estado&&this.showPaPs&&(this.isPaPs=!0))})},t=>{console.log("error",t)}))}loadPortabilidad(t){let e=t&&t.MENU_PORTABILIDAD?t.MENU_PORTABILIDAD:null;e&&(e=e.filter(t=>!0===t.enabled),e.length>0&&(this.menuPortabilidad=e[0],this.menuPortabilidad&&this.menuPortabilidad.enabled&&(this.isPortabilidad=!0)))}loadMi10(t){const e=t&&t.MENU_MI10?t.MENU_MI10:null;if(e){const t=e.filter((function(t){return!0===t.enabled}));t.length>0&&(this.mi10=t[0],this.clienteStore$.select(l.c.selectClienteState).pipe(Object(a.a)(1)).subscribe(t=>{this.modalStore$.select(S.getMi10Info).pipe(Object(a.a)(1)).subscribe(t=>{t&&(1!==t.typeModal&&2!==t.typeModal||(this.activeMi10=!0))})},t=>{console.log("error",t)}))}}loadInversiones(t){this.deviceBridgeService.getValueFromSecureStorage("inversiones").pipe(Object(a.a)(1)).subscribe(t=>{this.showInv="true"===t.data});let e=t&&t.MENU_INVERSIONES?t.MENU_INVERSIONES:null;e&&(e=e.filter(t=>!0===t.enabled),e.length>0&&(this.menuInversiones=e[0],this.isInversiones=this.menuInversiones&&this.menuInversiones.enabled&&this.showInv?1:this.menuInversiones&&this.menuInversiones.enabled&&!this.showInv?2:0))}openBrowser(t){this.deviceBridgeService.openBrowser(t.action)}selectProducto(t){this.movimientosStore$.dispatch(u.a.MovimientosSetAction({account:t.nroCuenta,mnemonic:t.mnemonic,typeMovements:"productos"})),this.movimientosStore$.select(u.c.seleccionarMovimientoPorId(t.nroCuenta)).pipe(Object(a.a)(1)).subscribe(t=>{t||this.movimientosStore$.dispatch(u.a.MovimientosRequestAction()),this.router.navigate(["movimientos-producto"])})}redirectPlanCuentaConTodo(t){this.movimientosTcrStore$.dispatch(m.a.MovimientosTcrSetAction({account:t.nrotarjeta,uuid:t.uuid})),this.movimientosTcrStore$.dispatch(m.a.MovimientosTcrRequestAction()),this.currentGestionCardStore$.dispatch(Object(P.a)({account:t})),this.router.navigate(["gestiona-tu-tarjeta"])}buscarMovimientos(t){t.redirect?this.menuRouter.seleccionaMenu("LINK","/"+t.redirect):this.redirectPlanCuentaConTodo(t)}selectCuentaAhorro(t){this.savingAccountHandler.selectSavingAccount(t).subscribe(async t=>{await this.router.navigate([t])})}setLogo(t){return"logo_"+t}pilotoBepass(t){return"productos_ahorro_vivienda"!==t.id||0!=t.bepass}}return t.\u0275fac=function(e){return new(e||t)(v.Nb(A.h),v.Nb(A.h),v.Nb(A.h),v.Nb(A.h),v.Nb(A.h),v.Nb(f.a),v.Nb(O),v.Nb(A.h),v.Nb(c.b),v.Nb(A.h),v.Nb(b.a),v.Nb(I.a),v.Nb(v.z),v.Nb(A.h),v.Nb(A.h),v.Nb(y.a))},t.\u0275cmp=v.Hb({type:t,selectors:[["app-menu-productos"]],viewQuery:function(t,e){var o;1&t&&v.Lc(s.d,!0),2&t&&v.uc(o=v.bc())&&(e.modalbepass=o.first)},decls:14,vars:14,consts:[["title","Productos y servicios",3,"msdIcon"],[1,"category-title"],[3,"msdIcon","color","producto","dato","click",4,"ngFor","ngForOf"],[3,"msdIcon","producto","dato","click",4,"ngFor","ngForOf"],[3,"msdIcon","color","producto","dato","click",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"msdIcon","color","title","click",4,"ngIf"],[3,"msdIcon","color","producto","dato","click"],[3,"msdIcon","producto","dato","click"],[3,"msdIcon","title","click",4,"ngIf"],[3,"click",4,"ngFor","ngForOf"],[3,"msdIcon","title","click"],[3,"click"],[3,"msdIcon","color","title","nuevo"],[3,"msdIcon","color","title","click"]],template:function(t,e){1&t&&(v.Ob(0,"app-header-app",0),v.Tb(1,"div",1),v.Gc(2,"Mis productos"),v.Sb(),v.Ec(3,R,1,4,"app-list-item-producto",2),v.fc(4,"async"),v.Ec(5,w,1,3,"app-list-item-producto",3),v.fc(6,"async"),v.Ec(7,j,1,4,"app-list-item-producto",2),v.fc(8,"async"),v.Ec(9,x,1,4,"app-list-item-producto",4),v.Ec(10,F,5,3,"div",5),v.Ec(11,z,1,3,"app-list-item",6),v.Ec(12,D,1,3,"app-list-item",6),v.Ob(13,"app-footer")),2&t&&(v.mc("msdIcon","back_app"),v.Ab(3),v.mc("ngForOf",v.gc(4,8,e.productos$)),v.Ab(2),v.mc("ngForOf",v.gc(6,10,e.tarjetas$)),v.Ab(2),v.mc("ngForOf",v.gc(8,12,e.ahorros$)),v.Ab(2),v.mc("ngIf",e.isPaMp),v.Ab(1),v.mc("ngForOf",e.CATEGORIAS_PRODUCTOS),v.Ab(1),v.mc("ngIf",e.isPortabilidad),v.Ab(1),v.mc("ngIf",e.isPaPs))},directives:[C.a,i.n,i.o,k.a,$,U.a],pipes:[i.b],styles:["[hidden][_ngcontent-%COMP%]{display:none!important}@-webkit-keyframes fade-in{0%{opacity:0}to{opacity:1}}@keyframes fade-in{0%{opacity:0}to{opacity:1}}  body{background:#f6f7f8;margin-bottom:56px}.category-title[_ngcontent-%COMP%]{padding:16px 16px 8px;font-weight:800;font-size:14px;color:#868c99}"]}),t})()}];let G=(()=>{class t{}return t.\u0275mod=v.Lb({type:t}),t.\u0275inj=v.Kb({factory:function(e){return new(e||t)},imports:[[c.c.forChild(L)],c.c]}),t})();var H=o("KT2d"),K=o("lFb0");let V=(()=>{class t{}return t.\u0275mod=v.Lb({type:t}),t.\u0275inj=v.Kb({factory:function(e){return new(e||t)},imports:[[i.c,T.o]]}),t})();var Y=o("zezA"),J=o("FB+m");let Q=(()=>{class t{}return t.\u0275mod=v.Lb({type:t}),t.\u0275inj=v.Kb({factory:function(e){return new(e||t)},providers:[f.a,s.d],imports:[[i.c,G,H.a,K.a,V,s.e,n.a,Y.a.forRoot(),J.a]]}),t})()}}]);